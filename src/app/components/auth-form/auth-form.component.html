<form [formGroup]="form" (ngSubmit)="submit()" class="auth-form" novalidate>
  <label class="auth-form__field">
    <span>Correo electrónico</span>
    <input
      type="email"
      formControlName="email"
      autocomplete="email"
      placeholder="tu@correo.com"
      [class.auth-form__input--invalid]="(email?.touched || isSubmitted) && email?.invalid"
    />
    <small class="auth-form__error" *ngIf="(email?.touched || isSubmitted) && email?.errors?.['required']">El correo es obligatorio.</small>
    <small class="auth-form__error" *ngIf="(email?.touched || isSubmitted) && email?.errors?.['pattern']">Formato de correo inválido.</small>
  </label>

  <label class="auth-form__field">
    <span>Contraseña</span>
    <input
      type="password"
      formControlName="password"
      autocomplete="current-password"
      placeholder="Ingresa tu contraseña"
      [class.auth-form__input--invalid]="(password?.touched || isSubmitted) && password?.invalid"
    />
    <small class="auth-form__error" *ngIf="(password?.touched || isSubmitted) && password?.errors?.['required']">La contraseña es obligatoria.</small>
    <small class="auth-form__error" *ngIf="(password?.touched || isSubmitted) && password?.errors?.['pattern']">Caracteres inválidos.</small>
    <small class="auth-form__error" *ngIf="(password?.touched || isSubmitted) && password?.errors?.['uppercase']">Debe contener una mayúscula.</small>
    <small class="auth-form__error" *ngIf="(password?.touched || isSubmitted) && password?.errors?.['minLength']">Mínimo {{ password?.errors?.['minLength']?.requiredLength }} caracteres (actual: {{ password?.errors?.['minLength']?.actualLength }}).</small>
    <small class="auth-form__error" *ngIf="(password?.touched || isSubmitted) && password?.errors?.['number']">Debe contener un número.</small>
  </label>

  <label *ngIf="mode==='register'" class="auth-form__field">
    <span>Confirmar contraseña</span>
    <input
      type="password"
      formControlName="confirmPassword"
      autocomplete="new-password"
      placeholder="Repite tu contraseña"
      [class.auth-form__input--invalid]="(confirmPassword?.touched || isSubmitted) && confirmPassword?.invalid"
    />
    <small class="auth-form__error" *ngIf="(confirmPassword?.touched || isSubmitted) && confirmPassword?.errors?.['required']">La confirmación es obligatoria.</small>
    <small class="auth-form__error" *ngIf="(confirmPassword?.touched || isSubmitted) && confirmPassword?.errors?.['mismatch']">Las contraseñas no coinciden.</small>
  </label>

  <button type="submit" class="auth-form__button auth-form__button--primary" [disabled]="submitting || form.invalid && isSubmitted">
    <span *ngIf="!submitting">{{ mode==='login' ? 'Iniciar sesión' : 'Registrarse' }}</span>
    <span *ngIf="submitting" class="auth-form__spinner"></span>
  </button>
</form>
